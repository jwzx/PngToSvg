import{s as e,q as t,aS as n,r as i,d as s,v as a,aT as l,T as o,ap as r,aq as d,x as c,y as u,aU as p,a as f,ay as m,M as v,N as g,aV as y,A as h,X as w,aW as b,i as _,Z as z,B as S,_ as k,c as x,o as C,w as N,f as j,e as P,aX as T,g as B,h as L,t as F,ac as I,a6 as O}from"./index-aC1sJQ8P.js";import{N as $,a as U,_ as A,b as E,c as M,d as D,e as R,f as W}from"./Upload-CSUu0iPS.js";import{_ as V}from"./Statistic-BJ3vUKqi.js";import{_ as G}from"./Space-BbBh5AWF.js";const q=e([e("@keyframes spin-rotate","\n from {\n transform: rotate(0);\n }\n to {\n transform: rotate(360deg);\n }\n "),t("spin-container","\n position: relative;\n ",[t("spin-body","\n position: absolute;\n top: 50%;\n left: 50%;\n transform: translateX(-50%) translateY(-50%);\n ",[n()])]),t("spin-body","\n display: inline-flex;\n align-items: center;\n justify-content: center;\n flex-direction: column;\n "),t("spin","\n display: inline-flex;\n height: var(--n-size);\n width: var(--n-size);\n font-size: var(--n-size);\n color: var(--n-color);\n ",[i("rotate","\n animation: spin-rotate 2s linear infinite;\n ")]),t("spin-description","\n display: inline-block;\n font-size: var(--n-font-size);\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n margin-top: 8px;\n "),t("spin-content","\n opacity: 1;\n transition: opacity .3s var(--n-bezier);\n pointer-events: all;\n ",[i("spinning","\n user-select: none;\n -webkit-user-select: none;\n pointer-events: none;\n opacity: var(--n-opacity-spinning);\n ")])]),X={small:20,medium:18,large:16},H=s({name:"Spin",props:Object.assign(Object.assign({},u.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),slots:Object,setup(e){r(()=>{void 0!==e.spinning&&d("spin","`spinning` is deprecated, please use `show` instead.")});const{mergedClsPrefixRef:t,inlineThemeDisabled:n}=c(e),i=u("Spin","-spin",q,p,e,t),s=f(()=>{const{size:t}=e,{common:{cubicBezierEaseInOut:n},self:s}=i.value,{opacitySpinning:a,color:l,textColor:o}=s;return{"--n-bezier":n,"--n-opacity-spinning":a,"--n-size":"number"==typeof t?m(t):s[v("size",t)],"--n-color":l,"--n-text-color":o}}),a=n?g("spin",f(()=>{const{size:t}=e;return"number"==typeof t?String(t):t[0]}),s,e):void 0,l=y(e,["spinning","show"]),o=h(!1);return r(t=>{let n;if(l.value){const{delay:i}=e;if(i)return n=window.setTimeout(()=>{o.value=!0},i),void t(()=>{clearTimeout(n)})}o.value=l.value}),{mergedClsPrefix:t,active:o,mergedStrokeWidth:f(()=>{const{strokeWidth:t}=e;if(void 0!==t)return t;const{size:n}=e;return X["number"==typeof n?"medium":n]}),cssVars:n?void 0:s,themeClass:null==a?void 0:a.themeClass,onRender:null==a?void 0:a.onRender}},render(){var e,t;const{$slots:n,mergedClsPrefix:i,description:s}=this,r=n.icon&&this.rotate,d=(s||n.description)&&a("div",{class:`${i}-spin-description`},s||(null===(e=n.description)||void 0===e?void 0:e.call(n))),c=n.icon?a("div",{class:[`${i}-spin-body`,this.themeClass]},a("div",{class:[`${i}-spin`,r&&`${i}-spin--rotate`],style:n.default?"":this.cssVars},n.icon()),d):a("div",{class:[`${i}-spin-body`,this.themeClass]},a(l,{clsPrefix:i,style:n.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${i}-spin`}),d);return null===(t=this.onRender)||void 0===t||t.call(this),n.default?a("div",{class:[`${i}-spin-container`,this.themeClass],style:this.cssVars},a("div",{class:[`${i}-spin-content`,this.active&&`${i}-spin-content--spinning`,this.contentClass],style:this.contentStyle},n),a(o,{name:"fade-in-transition"},{default:()=>this.active?c:null})):c}}),J={style:{"margin-bottom":"12px"}};const K=k(s({name:"PngToSvg2",__name:"png-to-svg2",setup(e,{expose:t}){t();const n=w({fileList:[],format:"svg"}),i=h({origin:"https://vectorizer.com/",title:"免费图像矢量化",maxLength:20,allName:"vectorizer.zip",formats:"BMP, GIF, HEIC, HEIF, JPEG, JPG, PNG, TIF, TIFF".split(", "),show:!1,maxSize:1024*"204800kb".slice(0,-2),sortable:!0}),s=i.value.formats.map(e=>`.${e.toLowerCase()}`).join(","),l=h("");function o({play:e}){return[{title:"key",key:"key",resizable:!0,width:100},{title:"fileName",key:"fileName",resizable:!0},{title:"fileSize",key:"fileSize",resizable:!0,width:80},{title:"fileType",key:"fileType",resizable:!0,width:100},{title:"fileBase64",key:"fileBase64",resizable:!0,render:(e,t)=>a($,{width:50,height:50,style:"margin-right:5px;",src:e.fileBase64})},{title:"format",key:"format",resizable:!0},{title:"svgUrl",key:"svgUrl",resizable:!0,render:(e,t)=>a(z,{type:"text",value:i.value.origin+"download/"+e.result.sid+"/"+e.result.fid+"/"+e.result.convert_result})},{title:"Action",key:"actions",render:e=>a(U,{size:"small"},[a(S,{strong:!0,size:"small",round:!0,type:"success",onClick:()=>f(e)},{default:()=>"DownLoad"}),a(S,{strong:!0,size:"small",round:!0,type:"error",onClick:()=>m(e)},{default:()=>"Del"})])}]}const r=b(),d=o({play(e){r.info(`Play ${e.fileName}`)}});let c=h([]),u=h([]);const p=(e,t)=>{e=e||16,t=t||"";let n="";for(;n.length<e;)n+=Math.floor(65535*Math.random()).toString(32);return n=t+n.slice(0,e),-1!=u.value.indexOf(n)?p(e,t):(u.value.push(n),n)},f=e=>{v(e.result,e.fileName)},m=e=>{x.value=x.value.filter(t=>t.key!=e.key)},v=(e,t)=>{const n=document.createElement("a");e&&"object"==typeof e&&(t=t||e.name,e=i.value.origin+"download/"+e.sid+"/"+e.fid+"/"+e.convert_result),n.href=e,n.target="_blank",n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),requestAnimationFrame(function(){document.body.removeChild(n)})},g=async e=>{let t=i.value.origin+"upload/"+l.value,n=new FormData;n.append("file",e.file),n.append("id",e.id),n.append("name",e.fileName);try{let i=await fetch(t,{method:"POST",body:n}),s=await i.json();if(console.log("result:",s),s.id)return await k(s,e),!0}catch(s){return console.log(s),r.error(e.fileName+"转换失败"),i.value.show=!1,!1}},y=async(e,t)=>{let n=await fetch(e),i=await n.json();return"success"!=i.status?(await y(e,t),!1):(console.log(i.status,e),t.result=i,r.info("转换完成，点击下载"),console.log(n),!0)},k=async(e,t)=>{let n=i.value.origin+"convert/"+l.value+"/"+e.id+"?rnd"+Math.random(),s=await fetch(n);"success"==(await s.json()).status?(n=n.replace("/convert/","/status/"),await y(n,t)):r.error(t.fileName+"转换失败")},x=h([]),C=e=>new Promise((t,n)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)});_(()=>{l.value=p()});var N=e=>e.toString().replace(/[ |\(\)=>]/g,"");const j={formData:n,appSettings:i,acceptType:s,sessionId:l,createColumns:o,message:r,columns:d,get fileList(){return c},set fileList(e){c=e},get idList(){return u},set idList(e){u=e},createId:p,downloadBtn:f,delList:m,clearAll:()=>{x.value=[]},download:v,downloadAll:function(){if(0==x.value.length)return void r.error("未发现数据");let e=i.value.allName,t=x.value.filter(function(e){var t;return null==(t=e.result)?void 0:t.convert_result}).map(function(e){return e.result.fid}),n=i.value.origin+"all/"+l.value+"/"+e+"?order="+t.join(",")+"&rnd="+Math.random();v(n,e)},uploadFile:g,checkImgStatus:y,processFile:k,formatImgList:x,localImageToBase64:C,getFileNameWithoutExtension:function(e){if(null==e||""==e)return e;var t=e.indexOf(".");return t>0?e.substring(0,t):e},getFileNameExtension:function(e){if(null==e||""==e)return e;var t=e.indexOf(".");return t>0?e.substring(t+1):""},get nameOf(){return N},set nameOf(e){N=e},handleUploadChange:async e=>{var t,s,a,l;console.log("fileList",e,c);let o="";(null==(t=e.file)?void 0:t.file)&&(o=await C(e.file.file)),i.value.show=!0;let r={fileName:e.file.name,fileSize:null==(l=null==(a=null==(s=e.file)?void 0:s.file)?void 0:a.size)?void 0:l.toString(),fileType:e.file.type,fileBase64:o,format:n.format,svgUrl:"",file:e.file.file,id:p(26,"file_"),key:e.file.id};await g(r),x.value.push(r),i.value.show=!1,console.log(x.value)},rowKey:e=>{var t;return null==(t=e.file)?void 0:t.id},get NButton(){return S}};return Object.defineProperty(j,"__isScriptSetup",{enumerable:!1,value:!0}),j}}),[["render",function(e,t,n,i,s,a){const l=B,o=T,r=M,d=D,c=E,u=A,p=V,f=R,m=W,v=H,g=I;return C(),x(g,{bordered:!1,size:"small",class:"card-wrapper"},{default:N(()=>[j(u,{multiple:"","directory-dnd":"",max:20,"file-list":i.fileList,accept:i.acceptType,onChange:i.handleUploadChange},{default:N(()=>[j(c,null,{default:N(()=>[P("div",J,[j(o,{size:"48",depth:3},{default:N(()=>[j(l,{"local-icon":"CloudUpload"})]),_:1})]),j(r,{style:{"font-size":"16px"}},{default:N(()=>t[0]||(t[0]=[L(" 点击或者拖动文件到该区域来上传 ")])),_:1,__:[0]}),j(d,{depth:"3",style:{margin:"8px 0 0 0"}},{default:N(()=>t[1]||(t[1]=[L(" 1、单击“上传文件”按钮并选择最多 20 张您想要矢量化的光栅图像。 ")])),_:1,__:[1]}),j(d,{depth:"3",style:{margin:"8px 0 0 0"}},{default:N(()=>t[2]||(t[2]=[L(" 2、等待转换过程完成，然后使用缩略图单独下载文件，或将其分组到 ZIP 存档中。 ")])),_:1,__:[2]})]),_:1})]),_:1},8,["file-list","accept"]),j(f,{justify:"end"},{default:N(()=>[j(p,{label:"当前列表"},{default:N(()=>[L(" 共"+F(i.formatImgList.length)+"条 ",1)]),_:1}),j(i.NButton,{type:"primary",onClick:i.downloadAll},{default:N(()=>t[3]||(t[3]=[L("下载全部")])),_:1,__:[3]}),j(i.NButton,{type:"primary",onClick:i.clearAll},{default:N(()=>t[4]||(t[4]=[L("清空全部")])),_:1,__:[4]})]),_:1}),j(v,{show:i.appSettings.show},{default:N(()=>[j(m,{columns:i.columns,data:i.formatImgList,bordered:!1,"row-key":i.rowKey,"max-height":250},null,8,["columns","data"])]),_:1},8,["show"])]),_:1})}],["__file","F:/study/electron/electron-egg/frontend/src/views/png-to-svg/modules/png-to-svg2.vue"]]);const Z=k(s({name:"png-to-svg",__name:"index",setup(e,{expose:t}){t();const n=O(),i=f(()=>n.isMobile?0:16),s={appStore:n,gap:i,PngToSvg2:K};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),[["render",function(e,t,n,i,s,a){const l=G;return C(),x(l,{vertical:"",size:16},{default:N(()=>[j(i.PngToSvg2)]),_:1})}],["__file","F:/study/electron/electron-egg/frontend/src/views/png-to-svg/index.vue"]]);export{Z as default};
